<%- include('../partials/header') %>
<style>
  body {
    position: relative;
    min-height: 100vh;
    margin: 0;
    padding: 0;
  }

  /* Background image with transparency */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('/images/image.jpg') no-repeat center center / cover;
    opacity: 0.7; 
    z-index: -1; 
  }

  .login-bg .card {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(3px);
     border-radius: 12px;
  }
</style>
<div class="login-bg">
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-sm p-4">
          <h2 class="mb-4 text-center text-primary">Register</h2>

          <% if (typeof error !== 'undefined' && error) { %>
          <div class="alert alert-danger"><%= error %></div>
          <% } %> <% if (typeof success !== 'undefined' && success) { %>
          <div class="alert alert-success"><%= success %></div>
          <% } %>

          <form method="post" action="/auth/register" id="registerForm">
            <div class="mb-3">
              <label for="name" class="form-label">Name</label>
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                required
                placeholder="Enter your full name"
              />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                required
                placeholder="Enter your email address"
              />
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  name="password"
                  required
                  placeholder="Enter a secure password"
                />
                <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                    üëÅÔ∏è
                </button>
              </div>
            </div>
            <div class="mb-3">
              <label for="confirm_password" class="form-label">Confirm Password</label>
              <div class="input-group">
                <input
                  type="password"
                  class="form-control"
                  id="confirm_password"
                  name="confirm_password"
                  required
                  placeholder="Re-enter your password"
                />
                <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                    üëÅÔ∏è
                </button>
              </div>
            </div>
            <button type="submit" class="btn btn-primary w-100">Register</button>
          </form>
          <p class="text-center mt-3">
            Already have an account?
            <a href="/auth/login" class="text-primary">Login</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  const form = document.getElementById('registerForm');
  const password = document.getElementById('password');
  const confirmPassword = document.getElementById('confirm_password');

  form.addEventListener('submit', function(e) {
    if (password.value !== confirmPassword.value) {
      e.preventDefault(); // stop form submission
      alert("Passwords do not match! Please re-enter.");
      confirmPassword.focus();
    }
  });
  const toggleBtn = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('password');
  toggleBtn.addEventListener('click', () => {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
  });
  const confirmtoggleBtn = document.getElementById('toggleConfirmPassword');
  const confirmPasswordInput = document.getElementById('confirm_password');
  confirmtoggleBtn.addEventListener('click', () => {
    const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    confirmPasswordInput.setAttribute('type', type);
  });
  
</script>
<%- include('../partials/footer') %>
